<script>
    $(document).ready(function(){
        console.log("We are here now.");
    });
</script>
<div id="ajax_results" width="100%">
<div id="meta">
    {% if meta.counts.soa %}
        {{ meta.counts.soa }} <a href="#q={{search}}&SOA">SOA</a> records |
    {% else %}
        zero SOA records |
    {% endif %}
    {% if meta.counts.addr %}
        {{ meta.counts.addr }} <a href="#q={{search}}&Address">A/AAAA</a> records |
    {% else %}
        zero A/AAAA records |
    {% endif %}
    {% if meta.counts.cname %}
        {{ meta.counts.cname }} <a href="#q={{search}}&CNAME">CNAME</a> records |
    {% else %}
        zero CNAME records |
    {% endif %}
    {% if meta.counts.domain %}
        {{ meta.counts.domain }} <a href="#q={{search}}&Domain">Domains</a> |
    {% else %}
        zero Domains |
    {% endif %}
    {% if meta.counts.intr %}
        {{ meta.counts.intr }} <a href="#q={{search}}&Interface">INTR</a> records |
    {% else %}
        zero INTR records |
    {% endif %}
    {% if meta.counts.sys %}
        {{ meta.counts.sys }} <a href="#q={{search}}&System">Systems</a> |
    {% else %}
        zero Systems |
    {% endif %}
    {% if meta.counts.mx %}
        {{ meta.counts.mx }} <a href="#q={{search}}&MX">MX</a> records |
    {% else %}
        zero MX records |
    {% endif %}
    {% if meta.counts.ns %}
        {{ meta.counts.ns }} <a href="#q={{search}}&NS">NS</a> records |
    {% else %}
        zero NS records |
    {% endif %}
    {% if meta.counts.ptr %}
        {{ meta.counts.ptr }} <a href="#q={{search}}&PTR">PTR</a> records |
    {% else %}
        zero PTR records |
    {% endif %}
    {% if meta.counts.txt %}
        {{ meta.counts.txt }} <a href="#q={{search}}&TXT">TXT</a> records
    {% else %}
        zero TXT records
    {% endif %}
</div>
<div id='search-time' style='margin-top: 2px;' >
</div>
<br/>
{% if sys %}
    <h4><a name="q={{search}}&System">Systems</a></h4>
    <table class="tablesorter system-table">
        <thead>
        <tr>
            <th>Hostname</th>
            <th>OOB</th>
            <th>Model</th>
            <th>Rack</th>
            <th>Serial</th>
            <th>Asset</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        {% for s in sys %}
        <tr>
            <td>{{ s.hostname }}</td>
            <td>{{ s.oob_ip }}</td>
            <td>{{ s.server_model if s.server_model_id else "" }}</td>
            <td>{{ s.system_rack if s.system_rack_id else "" }}</td>
            <td>{{ s.serial }}</td>
            <td>{{ s.asset_tag }}   </td>
            <td><a href='{{ s.get_absolute_url() }}'>View</a> <a href='{{ s.get_edit_url() }}'>Edit</a></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}
{% if misc %}
    <table class="tablesorter">
        <thead>
        <tr>
            <th>Networks, Sites, and Vlans</th>
        </tr>
        </thead>
        <tbody>
        {% for object in misc %}
            <tr>
                <td><a href="{{ object.get_absolute_url() }}">{{ object }}</a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if soas %}
    <h4><a name="q={{search}}&SOA">SOA</a></h4>
    <table class="tablesorter record-table">
        <thead>
        <tr>
            <th>SOA</th>
            <th>Serial</th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody>
        {% for soa in soas %}
        <tr>
            <td><a href="{{ soa.get_absolute_url() }}">{{ soa }}</a></td>
            <td>{{ soa.serial }}</td>
            <td>{{ 'Zone waiting to be rebuilt' if soa.dirty else 'Zone is up-to-date'}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if domains %}
    <h4><a name="q={{search}}&Domain">Domains</a></h4>
    <table class="tablesorter">
        <thead>
        <tr>
            <th>Domain</th>
            <th>SOA</th>
        </tr>
        </thead>
        <tbody>
        {% for domain in domains %}
        <tr>
            <td><a href="{{ domain.get_absolute_url() }}">{{ domain.name }}</a></td>
            <td>
                {% if domain.soa %}
                <a href="{{ domain.soa.get_absolute_url() }}">{{ domain.soa }}</a>
                {% endif %}
            </td>
        </tr>
        </tbody>
        {% endfor %}
    </table>
{% endif %}

{% if nss %}
    <h4><a name="q={{search}}&Nameserver">Nameserver</a></h4>
    <table class="tablesorter record-table">
        <thead>
        <tr>
            <th>Domain</th>
            <th></th>
            <th>Server</th>
        </tr>
        </thead>
        <tbody>
        {% for ns in nss %}
        <tr>
            <td><a href="{{ ns.get_absolute_url() }}">{{ ns.domain.name }}</a></td>
            <td><b>NS</b></td>
            <td>{{ ns.server }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if mxs %}
    <h4><a name="q={{search}}&MX">MX</a> Records</h4>
    <table class="tablesorter record-table">
        <thead>
        <tr>
            <th>FQDN</th>
            <th></th>
            <th>Server</th>
        </tr>
        </thead>
        <tbody>
        {% for mx in mxs %}
        <tr>
            <td><a href="{{ mx.get_fancy_edit_url() }}">{{ mx.fqdn }}</a></td>
            <td><b>MX</b></td>
            <td>{{ mx.server }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if srvs %}
    <h4><a name="q={{search}}&SRV">SRV</a> Records</h4>
    <table class="tablesorter record-table">
        <thead>
        <tr>
            <th>FQDN</th>
            <th></th>
            <th>Target</th>
        </tr>
        </thead>
        <tbody>
        {% for srv in srvs %}
        <tr>
            <td><a href="{{ srv.get_fancy_edit_url() }}">{{ srv.fqdn }}</a></td>
            <td><b>SRV</b></td>
            <td>{{ srv.target }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if txts %}
    <h4><a name="q={{search}}&TXT">TXT</a> Records</h4>
    <table class="tablesorter record-table">
        <thead>
        <tr>
            <th>FQDN</th>
            <th></th>
            <th>Data</th>
        </tr>
        </thead>
        <tbody>
        {% for txt in txts %}
        <tr>
            <td><a href="{{ txt.get_fancy_edit_url() }}">{{ txt.fqdn }}</a></td>
            <td><b>TXT</b></td>
            <td>{{ txt.data_data }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if cnames %}
    <h4><a name="q={{search}}&CNAME">CNAME</a> Records</h4>
    <table class="tablesorter record-table">
        <thead>
        <tr>
            <th>FQDN</th>
            <th></th>
            <th>Data</th>
        </tr>
        </thead>
        <tbody>
        {% for cname in cnames %}
        <tr>
            <td><a href="{{ cname.get_fancy_edit_url() }}">{{ cname.fqdn }}</a></td>
            <td><b>CNAME</b></td>
            <td>{{ cname.target }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if intrs %}
    <h4><a name="q={{search}}&Interface">Interface</a> Records</h4>
    <table class="tablesorter intr-table">
        <thead>
        <tr>
            <th>FQDN</th>
            <th></th>
            <th>IP</th>
        </tr>
        </thead>
        <tbody>
        {% for intr in intrs %}
        <tr>
            <td><a href="{{ intr.get_absolute_url() }}">{{ intr.fqdn }}</a></td>
            <td><b>A/PTR</b></td>
            <td>{{ intr.ip_str }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if addrs %}
<h4><a id="q={{search}}&Address">Address</a> Records</h4>
    <table class="tablesorter addr-table">
        <thead>
        <tr>
            <th>FQDN</th>
            <th></th>
            <th>IP</th>
        </tr>
        </thead>
        <tbody>
        {% for addr in addrs %}
        <tr>
            <td><a href="{{ addr.get_fancy_edit_url() }}">{{ addr.fqdn }}</a></td>
            <td><b>{{ addr.record_type() }}</b></td>
            <td>{{ addr.ip_str }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if ptrs %}
    <h4><a name="q={{search}}&PTR">PTR</a> Records</h4>
    <table class="tablesorter ptr-table">
        <thead>
        <tr>
            <th>IP</th>
            <th></th>
            <th>FQDN</th>
        </tr>
        <thead>
        <tbody>
        {% for ptr in ptrs %}
        <tr>
            <td>{{ ptr.ip_str }}</td>
            <td><b>PTR</b></td>
            <td><a href="{{ ptr.get_fancy_edit_url() }}">{{ ptr.name }}</a></td>
        </tr>
        {% endfor %}
        <tbody>
    </table>
{% endif %}
</div>
